{"version":3,"file":"js/5435.28033bd7.js","mappings":"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","sources":["webpack://mems-client/./src/components/GLOBAL/Camera.vue","webpack://mems-client/./src/components/GLOBAL/Camera.vue?d1e5"],"sourcesContent":["<template>\r\n<!-- \r\n***********************************\r\n*  Created By : Reveal IQ         *\r\n*  Author     : Bharathi          *\r\n*  Date       : 28 OCT 2020       *\r\n*  Version    : 0.1.0.01.14-1020  *\r\n***********************************\r\n-->\r\n  <section>\r\n    <!-- ****** Registartion Camera ******-->\r\n    <div class=\"IconFont\"  v-if=\"openVideo==null\"\r\n      :class=\"camok===0 && picok==0 ? 'cameraNormal':'camerasub'\">\r\n      <font-awesome-icon icon=\"camera-retro\" @click=\"startCamera()\"\r\n       class=\"cameraIcon\" />\r\n    </div>\r\n    <!--**** Image Capture ****-->\r\n    <div class=\"row\"  v-if=\"openVideo==null\"\r\n      :class=\"camok===1 && picok==1?'cameraNormal':'camerasub'\">\r\n      <div class=\"col-3\">\r\n        <!--***** Captured Image ****-->\r\n        <img\r\n          v-bind:src=\"captures[captures.length-1]\"\r\n          :class=\"captures.length!==0 ? 'regImage': 'regImgDump'\"/>\r\n        <!-- ****** Retake Button ******-->\r\n   \r\n        <button id=\"retake\" @click=\"startCamera()\" class=\"retakeImgBtn\">\r\n          Retake\r\n       </button>\r\n      </div>\r\n    </div>\r\n <!-- ****** Video  Container ********-->\r\n    <div v-if=\"openVideo=='camera'\" class=\"cameraContainer\">\r\n      <div>\r\n        <video ref=\"localVideo\"  id=\"video\"   autoplay\r\n          :class=\"captures.length===0?'cameravideo':'camerasub'\"\r\n        ></video>\r\n        <canvas  ref=\"canvas\"    id=\"canvas\"   width=\"600\"  height=\"350\"\r\n         :class=\"captures.length!==0 ? 'cameravideo':'camerasub'\"\r\n        ></canvas>\r\n      </div>\r\n      <div class=\"row smallText\" v-if=\"cap===0\">\r\n        <div class=\"col-12 cameraBtnSpace\" align=\"center\">\r\n          <button id=\"snap\" v-on:click=\"capture()\" class=\"captureBtn\">Capture</button>\r\n          <button class=\"captureBtn\" @click=\"cancel()\">Cancel</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"row smallText\" v-else :class=\"cap===1?'cameraNormal':'camerasub'\">\r\n        <div class=\"col-12 cameraBtnSpace\" align=\"center\">\r\n          <button id=\"retake\" @click=\"retakeCamera()\" class=\"retakeBtn\">\r\n            <font-awesome-icon icon=\"camera-retro\" class=\"retakeIcon\" />\r\n            <span class=\"retakeModalBtn\">Retake</span>\r\n          </button>\r\n          <button class=\"captureBtn\" @click=\"handleOk()\">Attach</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport { comBus } from \"../../main\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      openVideo: null,\r\n      canvas: {},\r\n      captures: [],\r\n      context: {},\r\n      cap: 0,\r\n      picok: 0,\r\n      show: false\r\n    };\r\n  },\r\n  props: {\r\n    rcontent: {},\r\n    puuid: null,\r\n    pid: null,\r\n    pdata: null\r\n  },\r\n  methods: {\r\n    //Clear picture\r\n    clearpic() {\r\n      this.picok = 1;\r\n    },\r\n    capture() {\r\n      this.cap = 1;\r\n      this.canvas = this.$refs.canvas;\r\n      this.context = this.canvas\r\n        .getContext(\"2d\")\r\n        .drawImage(this.$refs.localVideo, 0, 0);\r\n      this.captures.push(this.$refs.canvas.toDataURL(\"image/png\"));\r\n      let stream = this.$refs.localVideo.srcObject;\r\n      let tracks = stream.getTracks();\r\n      tracks.forEach(function(track) {\r\n        track.stop();\r\n      });\r\n    },\r\n    //Camera to start\r\n    async startCamera() {\r\n      this.captures = [];\r\n      this.cap = 0;\r\n      let stream = null;\r\n      this.openVideo = \"camera\";\r\n      try {\r\n        stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n        this.$refs.localVideo.srcObject = stream;\r\n        this.$refs.localVideo.play();\r\n      } catch (err) {\r\n        this.$parent.cameraErr = true;\r\n      }\r\n    },\r\n    retakeCamera() {\r\n      this.captures = [];\r\n      this.cap = 0;\r\n      navigator.mediaDevices.getUserMedia({ video: true }).then(mediaStream => {\r\n        this.$refs.localVideo.srcObject = mediaStream;\r\n        this.$refs.localVideo.play();\r\n      });\r\n    },\r\n    //To save  image to attach\r\n    handleOk() {\r\n      let pic = this.captures[this.captures.length - 1];\r\n      this.$parent.pic = pic;\r\n      this.$store.commit(\"setcam\", 1);\r\n      this.picok = 1;\r\n      this.$parent.regitValidation();\r\n      this.$parent.imageStatus = true;\r\n      this.openVideo = null;\r\n    },\r\n    cancel() {\r\n      this.openVideo = null;\r\n      this.picok = 0;\r\n      let stream = this.$refs.localVideo.srcObject;\r\n      let tracks = stream.getTracks();\r\n      tracks.forEach(function(track) {\r\n        track.stop();\r\n      });\r\n      this.camok = 0;\r\n    }\r\n  },\r\n  created() {\r\n    this.comBus.on(\"setEdit\", data => {\r\n      this.show = data;\r\n    });\r\n    if (this.pdata != null) {\r\n      this.captures.push(this.pdata);\r\n      this.$store.commit(\"setcam\", 1);\r\n      this.picok = 1;\r\n    }\r\n  },\r\n  computed: mapState([\"camok\", \"ActiveApp\"]),\r\n  watch: {\r\n    pdata(newValue, oldValue) {\r\n      this.value = newValue;\r\n      this.pdata = this.value;\r\n      if (this.pdata != null) {\r\n        this.captures.push(this.pdata);\r\n        this.$store.commit(\"setcam\", 1);\r\n        this.picok = 1;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"./Styles/font-style.scss\";\r\n@import \"./Styles/camera.scss\";\r\n</style>","import { render } from \"./Camera.vue?vue&type=template&id=5a8828e6&scoped=true\"\nimport script from \"./Camera.vue?vue&type=script&lang=js\"\nexport * from \"./Camera.vue?vue&type=script&lang=js\"\n\nimport \"./Camera.vue?vue&type=style&index=0&id=5a8828e6&lang=scss&scoped=true\"\n\nimport exportComponent from \"/mnt/d/Dev/MEMS/src/client/web/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5a8828e6\"]])\n\nexport default __exports__"],"names":["class","align","_createElementVNode","_createElementBlock","$data","_ctx","_createVNode","_component_font_awesome_icon","icon","onClick","$options","src","length","id","ref","autoplay","width","height","_hoisted_7","data","openVideo","canvas","captures","context","cap","picok","show","props","rcontent","puuid","pid","pdata","methods","clearpic","this","capture","$refs","getContext","drawImage","localVideo","push","toDataURL","stream","srcObject","tracks","getTracks","forEach","track","stop","async","navigator","mediaDevices","getUserMedia","video","play","err","$parent","cameraErr","retakeCamera","then","mediaStream","handleOk","pic","$store","commit","regitValidation","imageStatus","cancel","camok","created","comBus","on","computed","mapState","watch","newValue","oldValue","value","__exports__","render"],"sourceRoot":""}