{"version":3,"file":"js/7836.d3e3c7e7.js","mappings":"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","sources":["webpack://mems-client/./src/components/GLOBAL/GLOBL-Camera.vue","webpack://mems-client/./src/components/GLOBAL/GLOBL-Camera.vue?0400"],"sourcesContent":["<!-- \r\n***********************************\r\n*  Created By : Reveal IQ         *\r\n*  Author     : Bharath           *\r\n*  Date       : 21 OCT 2021       *\r\n*  Version    : 0.1.0.01.03-0122  *\r\n***********************************\r\n-->\r\n<template>\r\n<div>\r\n  <div\r\n    v-if=\"isCameraOpen\"\r\n    class=\"bg-light border border-rounded p-2 border-2 container smallText\"\r\n  >\r\n    <div class=\"row bg-secondary m-2\">\r\n      <div class=\"col-sm-12\">\r\n        <div\r\n          v-if=\"isCameraOpen\"\r\n          v-show=\"!isLoading\"\r\n          class=\"camera-box\"\r\n        >\r\n          <video\r\n            v-show=\"!isPhotoTaken\"\r\n            ref=\"camera\"\r\n            width=\"400\"\r\n            height=\"400\"\r\n            autoplay\r\n          />\r\n\r\n          <canvas\r\n            v-show=\"isPhotoTaken\"\r\n            id=\"photoTaken\"\r\n            ref=\"canvas\"\r\n            width=\"100\"\r\n            height=\"100\"\r\n            class=\"p-5 m-4 rounded border-2 border border-light\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-sm-12\">\r\n        <div class=\"row bg-light p-4\">\r\n          <div\r\n            class=\"col-sm-6\"\r\n            :class=\"{ 'col-sm-12': !isPhotoTaken }\"\r\n          >\r\n            <div v-if=\"isCameraOpen && !isLoading\">\r\n              <div\r\n                class=\"btn button-color text-light\"\r\n                @click=\"takePhoto()\"\r\n              >\r\n                <div v-if=\"isPhotoTaken && isCameraOpen\">\r\n                  <font-awesome-icon\r\n                    icon=\"camera-retro\"\r\n                    class=\"mx-2\"\r\n                    size=\"1x\"\r\n                  />Retake\r\n                </div>\r\n                <div v-else>\r\n                  <font-awesome-icon\r\n                    icon=\"camera-retro\"\r\n                    class=\"mx-2\"\r\n                    size=\"1x\"\r\n                  />Capture\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-sm-6\">\r\n            <div v-if=\"isPhotoTaken && isCameraOpen\">\r\n              <button\r\n                class=\"btn button-color text-light\"\r\n                data-bs-toggle=\"modal\"\r\n                data-bs-target=\"#staticBackdrop\"\r\n                @click=\"saveImage()\"\r\n              >\r\n                <font-awesome-icon\r\n                  icon=\"paperclip\"\r\n                  class=\"mx-2\"\r\n                  size=\"1x\"\r\n                />Attach\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- This block will be useful in order to insert the Loader for camera -->\r\n      <!-- <div v-show=\"isCameraOpen && isLoading\" class=\"\">\r\n      </div> -->\r\n    </div>\r\n  </div>\r\n  <div\r\n    v-if=\"anyErrorOccured\"\r\n    class=\"showError fw-bold\"\r\n  >\r\n    {{ errorMessage }} - [{{ errorCode }}]\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nexport default {\r\n\tprops: {\r\n\t\terrorMessage: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"Media capture failed ! unable to access the camera\",\r\n\t\t},\r\n\t\terrorCode: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"GBCAM-E001\",\r\n\t\t},\r\n\t},\r\n\temits: [\"showPreview\"],\r\n\tsetup(props, { emit }) {\r\n\t\tconst isCameraOpen = ref(false);\r\n\t\tconst isPhotoTaken = ref(false);\r\n\t\tconst isShotPhoto = ref(false);\r\n\t\tconst isLoading = ref(false);\r\n\t\tconst canvas = ref(null);\r\n\t\tconst croppedImage = ref(null);\r\n\t\tconst camera = ref(null);\r\n\t\tconst anyErrorOccured = ref(false);\r\n\r\n\t\t// to switch ON / OFF camera\r\n\t\tfunction toggleCamera() {\r\n\t\t\tif (isCameraOpen.value) {\r\n\t\t\t\tisCameraOpen.value = false;\r\n\t\t\t\tisPhotoTaken.value = false;\r\n\t\t\t\tisShotPhoto.value = false;\r\n\t\t\t\tstopCameraStream();\r\n\t\t\t} else {\r\n\t\t\t\tisCameraOpen.value = true;\r\n\t\t\t\tcreateCameraElement();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// to switch ON Camera\r\n\t\tfunction createCameraElement() {\r\n\t\t\tisLoading.value = true;\r\n\t\t\tconst constraints = (window.constraints = {\r\n\t\t\t\taudio: false,\r\n\t\t\t\tvideo: true,\r\n\t\t\t});\r\n\t\t\tnavigator.mediaDevices\r\n\t\t\t\t.getUserMedia(constraints)\r\n\t\t\t\t.then((stream) => {\r\n\t\t\t\t\tisLoading.value = false;\r\n\t\t\t\t\tanyErrorOccured.value = false;\r\n\t\t\t\t\tcamera.value.srcObject = stream;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tisLoading.value = false;\r\n\t\t\t\t\tanyErrorOccured.value = true;\r\n\t\t\t\t\tdangerClose();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t// to switch OFF camera\r\n\t\tfunction stopCameraStream() {\r\n\t\t\tif (anyErrorOccured.value == false) {\r\n\t\t\t\tlet tracks = camera.value.srcObject.getTracks();\r\n\t\t\t\ttracks.forEach((track) => {\r\n\t\t\t\t\ttrack.stop();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction takePhoto() {\r\n\t\t\tisPhotoTaken.value = !isPhotoTaken.value;\r\n\t\t\tcroppedImage.value = canvas.value.getContext(\"2d\");\r\n\t\t\tcroppedImage.value.drawImage(\r\n\t\t\t\tcamera.value,\r\n\t\t\t\t200,\r\n\t\t\t\t90,\r\n\t\t\t\t500,\r\n\t\t\t\t500,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\t160,\r\n\t\t\t\t160\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tfunction dangerClose() {\r\n\t\t\ttoggleCamera();\r\n\t\t}\r\n\r\n\t\tfunction saveImage() {\r\n\t\t\tcroppedImage.value = canvas.value.getContext(\"2d\");\r\n\t\t\tcroppedImage.value.drawImage(\r\n\t\t\t\tcamera.value,\r\n\t\t\t\t200,\r\n\t\t\t\t90,\r\n\t\t\t\t500,\r\n\t\t\t\t500,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\t160,\r\n\t\t\t\t160\r\n\t\t\t);\r\n\t\t\tcroppedImage.value = canvas.value.toDataURL(\"image/png\");\r\n\t\t\temit(\"showPreview\"); // emitting event to update the preview image in parent component\r\n\t\t\ttoggleCamera(); //to close the camera window after capturing\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tisCameraOpen,\r\n\t\t\tisPhotoTaken,\r\n\t\t\tisShotPhoto,\r\n\t\t\tisLoading,\r\n\t\t\tanyErrorOccured,\r\n\t\t\t//local ref\r\n\t\t\tcanvas,\r\n\t\t\tcamera,\r\n\t\t\t//functions\r\n\t\t\ttoggleCamera,\r\n\t\t\tcreateCameraElement,\r\n\t\t\tstopCameraStream,\r\n\t\t\ttakePhoto,\r\n\t\t\tsaveImage,\r\n\t\t\tcroppedImage,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"./Styles/font-style.scss\";\r\n@import \"./Styles/colors.scss\";\r\n.button-color {\r\n\tbackground-color: $globalButtonColor;\r\n\topacity: 1 !important;\r\n}\r\n.button-color:hover {\r\n\topacity: 0.8 !important;\r\n}\r\n.showError {\r\n\tmin-height: 30px;\r\n\tcolor: $globalErrorColor !important;\r\n}\r\n</style>\r\n","import { render } from \"./GLOBL-Camera.vue?vue&type=template&id=53c74de6&scoped=true\"\nimport script from \"./GLOBL-Camera.vue?vue&type=script&lang=js\"\nexport * from \"./GLOBL-Camera.vue?vue&type=script&lang=js\"\n\nimport \"./GLOBL-Camera.vue?vue&type=style&index=0&id=53c74de6&lang=scss&scoped=true\"\n\nimport exportComponent from \"/mnt/e/Dev/GitProjects/MEMS/src/client/web/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53c74de6\"]])\n\nexport default __exports__"],"names":["class","ref","width","height","autoplay","id","_createElementBlock","$setup","_createElementVNode","_hoisted_9","onClick","_hoisted_10","_createVNode","_component_font_awesome_icon","icon","size","_hoisted_12","_hoisted_15","_toDisplayString","$props","props","errorMessage","type","String","default","errorCode","emits","setup","emit","isCameraOpen","isPhotoTaken","isShotPhoto","isLoading","canvas","croppedImage","camera","anyErrorOccured","toggleCamera","value","stopCameraStream","createCameraElement","constraints","window","audio","video","navigator","mediaDevices","getUserMedia","then","stream","srcObject","catch","dangerClose","tracks","getTracks","forEach","track","stop","takePhoto","getContext","drawImage","saveImage","toDataURL","__exports__","render"],"sourceRoot":""}