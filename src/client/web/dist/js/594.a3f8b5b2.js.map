{"version":3,"file":"js/594.a3f8b5b2.js","mappings":"qxJAiRMA,GAAQC,EAAAA,EAAAA,MAERC,EAAiBC,IACrBH,EAAMI,SAAS,gBAAiBD,IAW5BE,IAAeC,EAAAA,EAAAA,IAAI,IACnBC,IAAqBD,EAAAA,EAAAA,IAAI,IAEzBE,IAAaF,EAAAA,EAAAA,IAAI,CACrB,CACEG,GAAI,MACJC,MAAO,qBACPC,SAAU,EACVC,SAAU,aAEZ,CACEH,GAAI,MACJC,MAAO,cACPC,SAAU,GACVC,SAAU,eAIRC,GAAaC,UACjB,IACEZ,EAAc,CACZa,KAAM,CACJC,OAAQ,IACRC,KAAM,UACNC,QAAS,CACPC,OAAQ,OACRC,YAAa,QACbC,IAAK,cACLC,cAAc,EACdC,SAAU,IACVC,KAAM,CACJC,WAAY,QACZC,QAAS,CACP,CACEC,MAAO,YACPC,GAAI,KACJC,MAAOC,EAAMC,YAGjBC,QAAS,CACP,CACEC,WAAY,UACZR,WAAY,QACZS,aAAc,MACdC,GAAI,SAEN,CACEF,WAAY,iBACZR,WAAY,eACZS,aAAc,MACdC,GAAI,gBAEN,CACEF,WAAY,aACZR,WAAY,WACZS,aAAc,MACdC,GAAI,YAEN,CACEF,WAAY,gBACZR,WAAY,QACZS,aAAc,MACdC,GAAI,gBAGRC,WAAY,CACVC,IAAK,EACLN,UAAW,EACXO,QAAS,EACTC,cAAe,EAEfC,iBAAkB,iCAClBC,UAAW,mBACXC,aAAc,yBAEdC,OAAQ,EACRC,gBAAiB,EACjBC,aAAc,EACdC,aAAc,EACdC,QAAS,EAETC,gBAAiB,yBACjBC,YAAa,uBACbC,mBAAoB,kCAM5BC,SAAWC,IACQ,aAAbA,EAAInC,MACNoC,QAAQC,IAAI,yBAAuBF,EAAIG,UACvClD,GAAawB,MAAQuB,EAAIG,SAASC,SACzBJ,EAAInC,QASnB,MAAOwC,GACPJ,QAAQC,IAAIG,KAIVC,GAAmB5C,UACvB,IACEZ,EAAc,CACZa,KAAM,CACJC,OAAQ,IACRC,KAAM,UACNC,QAAS,CACPC,OAAQ,OACRC,YAAa,QACbC,IAAK,cACLC,cAAc,EACdC,SAAU,IACVC,KAAM,CACJC,WAAY,QACZC,QAAS,CACP,CACEC,MAAO,MACPC,GAAI,QACJC,MAAOC,EAAMS,gBAGjBP,QAAS,CACP,CACEC,WAAY,MACZR,WAAY,QACZS,aAAc,MACdC,GAAI,eAEN,CACEF,WAAY,UACZR,WAAY,QACZS,aAAc,MACdC,GAAI,eAEN,CACEF,WAAY,iBACZR,WAAY,eACZS,aAAc,MACdC,GAAI,uBAGRC,WAAY,CACVC,IAAK,EACLW,gBAAiB,yBACjBW,gBAAiB,yBACjBC,sBAAuB,2CAM/BT,SAAWC,IACQ,aAAbA,EAAInC,MACNoC,QAAQC,IAAI,yBAAuBF,EAAIG,UACvChD,GAAmBsB,MAAQuB,EAAIG,SAASC,SAC/BJ,EAAInC,QASnB,MAAOwC,GACPJ,QAAQC,IAAIG,KAOVI,GAAa/C,MAAOgD,EAAMhC,KAC9BiC,EAAK,aAAcD,EAAMhC,I,OAG3BkC,EAAAA,EAAAA,KAAU,KACRnD,KACA6C,Q,2yECldF,MAAMO,IAA2B,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://mems-client/./src/components/BIOMD/BIOMD/BIOMD-DASHBOARD/DASHBOARD-AssetDetail.vue","webpack://mems-client/./src/components/BIOMD/BIOMD/BIOMD-DASHBOARD/DASHBOARD-AssetDetail.vue?034e"],"sourcesContent":["<template>\r\n  <div class=\"container-fluid\">\r\n    <nav class=\"d-flex gap-3 p-2\">\r\n      <small\r\n        class=\"text-secondary\"\r\n        style=\"cursor: pointer\"\r\n        @click=\"changePage('dashboard')\"\r\n        >Back</small\r\n      >\r\n    </nav>\r\n\r\n    <div class=\"d-flex flex-column p-2 mt-4\">\r\n      <div>\r\n        <span class=\"title text-dark fw-normal fs-1\">{{\r\n          props.assetCode\r\n        }}</span>\r\n      </div>\r\n      <div>\r\n        <span class=\"badge rounded-pill bg-success fsXs text-uppercase\">{{\r\n          props.status\r\n        }}</span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row p-2 mt-4 mb-5\" v-for=\"asset in assetProfile\" :key=\"asset\">\r\n      <div class=\"col-md-5\">\r\n        <div class=\"mb-5\">\r\n          <div class=\"\">\r\n            <span class=\"card-title fw-normal fs-5\">Profile</span>\r\n            <p class=\"card-text\">\r\n              <small class=\"text-muted fsXs\"\r\n                >Detailed equipment description</small\r\n              >\r\n            </p>\r\n          </div>\r\n          <div\r\n            class=\"g-3 mb-2 mt-2 rounded-3 container py-2 align-middle\"\r\n            style=\"background-color: #f5f6f6\"\r\n          >\r\n            <div class=\"d-flex flex-column gap-3\">\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Equipment Number</small>\r\n                  <small class=\"fw-normal\">{{ asset.assetCode }}</small>\r\n                </div>\r\n              </td>\r\n              <td v-if=\"parentAssetProfile == 0\">\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Parent Name</small>\r\n                  <small class=\"text-muted\">\r\n                    No Parent Equipment Assigned\r\n                  </small>\r\n                </div>\r\n              </td>\r\n              <td v-else>\r\n                <div\r\n                  class=\"d-flex flex-column\"\r\n                  v-for=\"parent in parentAssetProfile\"\r\n                >\r\n                  <small class=\"text-secondary fsXs\">Parent Name</small>\r\n                  <small\r\n                    >{{ parent.parentAssetCode }} |\r\n                    {{ parent.parentModelName }} |\r\n                    {{ parent.parentManufaturerName }}\r\n                  </small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Serial Number</small>\r\n                  <small>{{ asset.serialNumber }}</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Manufacturer</small>\r\n                  <small>{{ asset.manufacturerName }}</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Model</small>\r\n                  <small>{{ asset.modelName }}</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Year of Manufacture</small>\r\n                  <small>{{ asset.manufactureDate }}</small>\r\n                </div>\r\n              </td>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"mb-5\">\r\n          <div>\r\n            <span class=\"card-title fw-normal fs-5\">Location</span>\r\n            <p class=\"card-text\">\r\n              <small class=\"text-muted fsXs\">Physical asset location</small>\r\n            </p>\r\n          </div>\r\n          <div\r\n            class=\"g-3 mb-2 mt-2 rounded-3 container py-2 align-middle\"\r\n            style=\"background-color: #f5f6f6\"\r\n          >\r\n            <div class=\"d-flex flex-column gap-3\">\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Facility</small>\r\n                  <small class=\"fw-normal\">{{ asset.facilityName }}</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Department</small>\r\n                  <small>ICU</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Location</small>\r\n                  <small>{{ asset.locationName }}</small>\r\n                </div>\r\n              </td>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"mb-5\">\r\n          <div>\r\n            <span class=\"card-title fw-normal fs-5\">Maintenance</span>\r\n            <p class=\"card-text\">\r\n              <small class=\"text-muted fsXs\">Assigned support teams</small>\r\n            </p>\r\n          </div>\r\n          <div\r\n            class=\"g-3 mb-2 mt-2 rounded-3 container py-2 align-middle\"\r\n            style=\"background-color: #f5f6f6\"\r\n          >\r\n            <div class=\"d-flex flex-column gap-3\">\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\"\r\n                    >Assigned Clinical Engineer</small\r\n                  >\r\n                  <small class=\"fw-normal\">John Doe</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\"\r\n                    >Assigned Support Team</small\r\n                  >\r\n                  <small>Life Support Team</small>\r\n                </div>\r\n              </td>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- <div class=\"mb-5\">\r\n          <div>\r\n            <span class=\"card-title fw-normal fs-5\">Purchase Order</span>\r\n            <p class=\"card-text\">\r\n              <small class=\"text-muted fsXs\">PO Details</small>\r\n            </p>\r\n          </div>\r\n          <div\r\n            class=\"g-3 mb-2 mt-2 rounded-3 container py-2 align-middle\"\r\n            style=\"background-color: #f5f6f6\"\r\n          >\r\n            <div class=\"d-flex flex-column gap-3\">\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">PO Number</small>\r\n                  <small class=\"fw-normal\">CIP-23234</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Acceptance Date</small>\r\n                  <small>12-Jun-22</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Vendor</small>\r\n                  <small>Ghana Medical Help</small>\r\n                </div>\r\n              </td>\r\n            </div>\r\n          </div>\r\n        </div> -->\r\n        <div class=\"mb-5\">\r\n          <div>\r\n            <span class=\"card-title fw-normal fs-5\"\r\n              >Additional Information</span\r\n            >\r\n          </div>\r\n          <div\r\n            class=\"g-3 mb-2 mt-2 rounded-3 container py-2 align-middle\"\r\n            style=\"background-color: #f5f6f6\"\r\n          >\r\n            <div class=\"d-flex flex-column gap-3\">\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"fw-normal\" v-if=\"asset.comment\">{{\r\n                    asset.comment\r\n                  }}</small>\r\n                  <small class=\"fw-normal text-secondary\" v-else\r\n                    >No comments added</small\r\n                  >\r\n                </div>\r\n              </td>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-7\">\r\n        <div class=\"mb-5\">\r\n          <div class=\"\">\r\n            <span class=\"card-title fw-normal fs-5\">Work Order</span>\r\n            <p class=\"card-text\">\r\n              <small class=\"text-muted fsXs\"\r\n                >List of all the work orders associated to this model</small\r\n              >\r\n            </p>\r\n          </div>\r\n          <div\r\n            v-for=\"work in workOrders\"\r\n            :key=\"work\"\r\n            class=\"mb-2 mt-2 rounded container py-2 align-middle\"\r\n            style=\"background-color: #f5f6f6\"\r\n          >\r\n            <div class=\"d-flex justify-content-between\" style=\"cursor: pointer\">\r\n              <td class=\"d-flex position-relative\">\r\n                <span\r\n                  class=\"position-absolute border border-light top-50 start-0 p-2 translate-middle rounded-circle bg-success\"\r\n                ></span>\r\n                <div class=\"d-flex flex-column ms-4\">\r\n                  <small class=\"text-secondary fsXs\">ID</small>\r\n                  <small class=\"fw-normal\">{{ work.ID }}</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Title</small>\r\n                  <small class=\"fw-normal\">{{ work.title }}</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Days Open</small>\r\n                  <small>{{ work.daysOpen }}</small>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"d-flex flex-column\">\r\n                  <small class=\"text-secondary fsXs\">Date Open</small>\r\n                  <small>{{ work.dateOpen }}</small>\r\n                </div>\r\n              </td>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\n\r\nconst store = useStore();\r\n\r\nconst sendSocketReq = (request) => {\r\n  store.dispatch(\"sendSocketReq\", request);\r\n};\r\n\r\nconst props = defineProps([\r\n  \"assetCode\",\r\n  \"status\",\r\n  \"modelName\",\r\n  \"parentAssetID\",\r\n  \"manufacturerName\",\r\n]);\r\n\r\nconst assetProfile = ref({});\r\nconst parentAssetProfile = ref({});\r\n\r\nconst workOrders = ref([\r\n  {\r\n    ID: 12838,\r\n    title: \"Initial Inspection\",\r\n    daysOpen: 5,\r\n    dateOpen: \"20-Sep-23\",\r\n  },\r\n  {\r\n    ID: 12835,\r\n    title: \"Replace PCB\",\r\n    daysOpen: 32,\r\n    dateOpen: \"23-Aug-23\",\r\n  },\r\n]);\r\n\r\nconst fetchAsset = async () => {\r\n  try {\r\n    sendSocketReq({\r\n      data: {\r\n        Expiry: 20000,\r\n        Type: \"REQUEST\",\r\n        Request: {\r\n          Module: \"MEMS\",\r\n          ServiceCode: \"BIOMD\",\r\n          API: \"FIND_RECORD\",\r\n          return_array: true,\r\n          max_list: 100,\r\n          find: {\r\n            collection: \"Asset\",\r\n            queries: [\r\n              {\r\n                field: \"assetCode\",\r\n                op: \"sb\",\r\n                value: props.assetCode,\r\n              },\r\n            ],\r\n            lookups: [\r\n              {\r\n                localField: \"modelID\",\r\n                collection: \"Model\",\r\n                foreignField: \"_id\",\r\n                as: \"Model\",\r\n              },\r\n              {\r\n                localField: \"manufacturerID\",\r\n                collection: \"Manufacturer\",\r\n                foreignField: \"_id\",\r\n                as: \"Manufacturer\",\r\n              },\r\n              {\r\n                localField: \"facilityID\",\r\n                collection: \"Facility\",\r\n                foreignField: \"_id\",\r\n                as: \"Facility\",\r\n              },\r\n              {\r\n                localField: \"parentAssetID\",\r\n                collection: \"Asset\",\r\n                foreignField: \"_id\",\r\n                as: \"ParentAsset\",\r\n              },\r\n            ],\r\n            projection: {\r\n              _id: 1,\r\n              assetCode: 1,\r\n              modelID: 1,\r\n              parentAssetID: 1,\r\n\r\n              manufacturerName: \"$Manufacturer.manufacturerName\",\r\n              modelName: \"$Model.modelName\",\r\n              facilityName: \"$Facility.facilityName\",\r\n\r\n              status: 1,\r\n              manufactureDate: 1,\r\n              serialNumber: 1,\r\n              locationName: 1,\r\n              comment: 1,\r\n\r\n              parentAssetCode: \"$ParentAsset.assetCode\",\r\n              parentModel: \"$ParentAsset.modelID\",\r\n              parentManufacturer: \"$ParentAsset.manufacturerID\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n\r\n      callback: (res) => {\r\n        if (res.Type === \"RESPONSE\") {\r\n          console.log(\"Response Packet -->\", res.Response);\r\n          assetProfile.value = res.Response.records;\r\n        } else if (res.Type === \"ERROR\") {\r\n          Type: \"ERROR\";\r\n          Response: {\r\n            Error_Code: \"API-CREATE_RECORD-E001\";\r\n            Error_Msg: \"CREATE_RECORD_API: Failed to execute query\";\r\n          }\r\n        }\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst fetchParentAsset = async () => {\r\n  try {\r\n    sendSocketReq({\r\n      data: {\r\n        Expiry: 20000,\r\n        Type: \"REQUEST\",\r\n        Request: {\r\n          Module: \"MEMS\",\r\n          ServiceCode: \"BIOMD\",\r\n          API: \"FIND_RECORD\",\r\n          return_array: true,\r\n          max_list: 100,\r\n          find: {\r\n            collection: \"Asset\",\r\n            queries: [\r\n              {\r\n                field: \"_id\",\r\n                op: \"eq_id\",\r\n                value: props.parentAssetID,\r\n              },\r\n            ],\r\n            lookups: [\r\n              {\r\n                localField: \"_id\",\r\n                collection: \"Asset\",\r\n                foreignField: \"_id\",\r\n                as: \"ParentAsset\",\r\n              },\r\n              {\r\n                localField: \"modelID\",\r\n                collection: \"Model\",\r\n                foreignField: \"_id\",\r\n                as: \"ParentModel\",\r\n              },\r\n              {\r\n                localField: \"manufacturerID\",\r\n                collection: \"Manufacturer\",\r\n                foreignField: \"_id\",\r\n                as: \"ParentManufacturer\",\r\n              },\r\n            ],\r\n            projection: {\r\n              _id: 1,\r\n              parentAssetCode: \"$ParentAsset.assetCode\",\r\n              parentModelName: \"$ParentModel.modelName\",\r\n              parentManufaturerName: \"$ParentManufacturer.manufacturerName\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n\r\n      callback: (res) => {\r\n        if (res.Type === \"RESPONSE\") {\r\n          console.log(\"Response Packet -->\", res.Response);\r\n          parentAssetProfile.value = res.Response.records;\r\n        } else if (res.Type === \"ERROR\") {\r\n          Type: \"ERROR\";\r\n          Response: {\r\n            Error_Code: \"API-CREATE_RECORD-E001\";\r\n            Error_Msg: \"CREATE_RECORD_API: Failed to execute query\";\r\n          }\r\n        }\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst emit = defineEmits([\"updatePage\"]);\r\n\r\n// Navigate to selected page to edit\r\nconst changePage = async (page, props) => {\r\n  emit(\"updatePage\", page, props);\r\n};\r\n\r\nonMounted(() => {\r\n  fetchAsset();\r\n  fetchParentAsset();\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../Style/font-style.scss\";\r\n</style>\r\n","import script from \"./DASHBOARD-AssetDetail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DASHBOARD-AssetDetail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DASHBOARD-AssetDetail.vue?vue&type=style&index=0&id=57ae6f1d&lang=scss&scoped=true\"\n\nimport exportComponent from \"/mnt/d/Dev/MEMS/src/client/web/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-57ae6f1d\"]])\n\nexport default __exports__"],"names":["store","useStore","sendSocketReq","request","dispatch","assetProfile","ref","parentAssetProfile","workOrders","ID","title","daysOpen","dateOpen","fetchAsset","async","data","Expiry","Type","Request","Module","ServiceCode","API","return_array","max_list","find","collection","queries","field","op","value","props","assetCode","lookups","localField","foreignField","as","projection","_id","modelID","parentAssetID","manufacturerName","modelName","facilityName","status","manufactureDate","serialNumber","locationName","comment","parentAssetCode","parentModel","parentManufacturer","callback","res","console","log","Response","records","error","fetchParentAsset","parentModelName","parentManufaturerName","changePage","page","emit","onMounted","__exports__"],"sourceRoot":""}