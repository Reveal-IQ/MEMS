"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[7836],{7836:function(e,a,t){t.r(a),t.d(a,{default:function(){return T}});var o=t(6252),i=t(9963),r=t(3577);const s={key:0,class:"bg-light border border-rounded p-2 border-2 container smallText"},n={class:"row bg-secondary m-2"},l={class:"col-sm-12"},c={key:0,class:"camera-box"},u={ref:"camera",width:"400",height:"400",autoplay:""},d={id:"photoTaken",ref:"canvas",width:"100",height:"100",class:"p-5 m-4 rounded border-2 border border-light"},v={class:"col-sm-12"},g={class:"row bg-light p-4"},m={key:0},h={key:0},k=(0,o.Uk)("Retake "),p={key:1},w=(0,o.Uk)("Capture "),b={class:"col-sm-6"},f={key:0},C=(0,o.Uk)("Attach "),y={key:1,class:"showError fw-bold"};function _(e,a,t,_,x,P){const D=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",null,[_.isCameraOpen?((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",n,[(0,o._)("div",l,[_.isCameraOpen?(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",c,[(0,o.wy)((0,o._)("video",u,null,512),[[i.F8,!_.isPhotoTaken]]),(0,o.wy)((0,o._)("canvas",d,null,512),[[i.F8,_.isPhotoTaken]])],512)),[[i.F8,!_.isLoading]]):(0,o.kq)("",!0)]),(0,o._)("div",v,[(0,o._)("div",g,[(0,o._)("div",{class:(0,r.C_)(["col-sm-6",{"col-sm-12":!_.isPhotoTaken}])},[_.isCameraOpen&&!_.isLoading?((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("div",{class:"btn button-color text-light",onClick:a[0]||(a[0]=e=>_.takePhoto())},[_.isPhotoTaken&&_.isCameraOpen?((0,o.wg)(),(0,o.iD)("div",h,[(0,o.Wm)(D,{icon:"camera-retro",class:"mx-2",size:"1x"}),k])):((0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(D,{icon:"camera-retro",class:"mx-2",size:"1x"}),w]))])])):(0,o.kq)("",!0)],2),(0,o._)("div",b,[_.isPhotoTaken&&_.isCameraOpen?((0,o.wg)(),(0,o.iD)("div",f,[(0,o._)("button",{class:"btn button-color text-light","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",onClick:a[1]||(a[1]=e=>_.saveImage())},[(0,o.Wm)(D,{icon:"paperclip",class:"mx-2",size:"1x"}),C])])):(0,o.kq)("",!0)])])])])])):(0,o.kq)("",!0),_.anyErrorOccured?((0,o.wg)(),(0,o.iD)("div",y,(0,r.zw)(t.errorMessage)+" - ["+(0,r.zw)(t.errorCode)+"] ",1)):(0,o.kq)("",!0)])}var x=t(2262),P={props:{errorMessage:{type:String,default:"Media capture failed ! unable to access the camera"},errorCode:{type:String,default:"GBCAM-E001"}},emits:["showPreview"],setup(e,{emit:a}){const t=(0,x.iH)(!1),o=(0,x.iH)(!1),i=(0,x.iH)(!1),r=(0,x.iH)(!1),s=(0,x.iH)(null),n=(0,x.iH)(null),l=(0,x.iH)(null),c=(0,x.iH)(!1);function u(){t.value?(t.value=!1,o.value=!1,i.value=!1,v()):(t.value=!0,d())}function d(){r.value=!0;const e=window.constraints={audio:!1,video:!0};navigator.mediaDevices.getUserMedia(e).then((e=>{r.value=!1,c.value=!1,l.value.srcObject=e})).catch((()=>{r.value=!1,c.value=!0,m()}))}function v(){if(0==c.value){let e=l.value.srcObject.getTracks();e.forEach((e=>{e.stop()}))}}function g(){o.value=!o.value,n.value=s.value.getContext("2d"),n.value.drawImage(l.value,200,90,500,500,0,0,160,160)}function m(){u()}function h(){n.value=s.value.getContext("2d"),n.value.drawImage(l.value,200,90,500,500,0,0,160,160),n.value=s.value.toDataURL("image/png"),a("showPreview"),u()}return{isCameraOpen:t,isPhotoTaken:o,isShotPhoto:i,isLoading:r,anyErrorOccured:c,canvas:s,camera:l,toggleCamera:u,createCameraElement:d,stopCameraStream:v,takePhoto:g,saveImage:h,croppedImage:n}}},D=t(3744);const O=(0,D.Z)(P,[["render",_],["__scopeId","data-v-53c74de6"]]);var T=O}}]);
//# sourceMappingURL=7836.8fd422c9.js.map