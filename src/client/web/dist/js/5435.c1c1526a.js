"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[5435],{5435:function(a,e,t){t.r(e),t.d(e,{default:function(){return C}});var s=t(6252),c=t(3577);const i=a=>((0,s.dD)("data-v-5a8828e6"),a=a(),(0,s.Cn)(),a),r={class:"col-3"},o=["src"],n={key:2,class:"cameraContainer"},l={key:0,class:"row smallText"},p={class:"col-12 cameraBtnSpace",align:"center"},h={class:"col-12 cameraBtnSpace",align:"center"},u=i((()=>(0,s._)("span",{class:"retakeModalBtn"},"Retake",-1)));function d(a,e,t,i,d,m){const k=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("section",null,[null==d.openVideo?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,c.C_)(["IconFont",0===a.camok&&0==d.picok?"cameraNormal":"camerasub"])},[(0,s.Wm)(k,{icon:"camera-retro",onClick:e[0]||(e[0]=a=>m.startCamera()),class:"cameraIcon"})],2)):(0,s.kq)("",!0),null==d.openVideo?((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,c.C_)(["row",1===a.camok&&1==d.picok?"cameraNormal":"camerasub"])},[(0,s._)("div",r,[(0,s._)("img",{src:d.captures[d.captures.length-1],class:(0,c.C_)(0!==d.captures.length?"regImage":"regImgDump")},null,10,o),(0,s._)("button",{id:"retake",onClick:e[1]||(e[1]=a=>m.startCamera()),class:"retakeImgBtn"}," Retake ")])],2)):(0,s.kq)("",!0),"camera"==d.openVideo?((0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",null,[(0,s._)("video",{ref:"localVideo",id:"video",autoplay:"",class:(0,c.C_)(0===d.captures.length?"cameravideo":"camerasub")},null,2),(0,s._)("canvas",{ref:"canvas",id:"canvas",width:"600",height:"350",class:(0,c.C_)(0!==d.captures.length?"cameravideo":"camerasub")},null,2)]),0===d.cap?((0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",p,[(0,s._)("button",{id:"snap",onClick:e[2]||(e[2]=a=>m.capture()),class:"captureBtn"},"Capture"),(0,s._)("button",{class:"captureBtn",onClick:e[3]||(e[3]=a=>m.cancel())},"Cancel")])])):((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,c.C_)(["row smallText",1===d.cap?"cameraNormal":"camerasub"])},[(0,s._)("div",h,[(0,s._)("button",{id:"retake",onClick:e[4]||(e[4]=a=>m.retakeCamera()),class:"retakeBtn"},[(0,s.Wm)(k,{icon:"camera-retro",class:"retakeIcon"}),u]),(0,s._)("button",{class:"captureBtn",onClick:e[5]||(e[5]=a=>m.handleOk())},"Attach")])],2))])):(0,s.kq)("",!0)])}var m=t(3907),k=(t(8722),{data(){return{openVideo:null,canvas:{},captures:[],context:{},cap:0,picok:0,show:!1}},props:{rcontent:{},puuid:null,pid:null,pdata:null},methods:{clearpic(){this.picok=1},capture(){this.cap=1,this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d").drawImage(this.$refs.localVideo,0,0),this.captures.push(this.$refs.canvas.toDataURL("image/png"));let a=this.$refs.localVideo.srcObject,e=a.getTracks();e.forEach((function(a){a.stop()}))},async startCamera(){this.captures=[],this.cap=0;let a=null;this.openVideo="camera";try{a=await navigator.mediaDevices.getUserMedia({video:!0}),this.$refs.localVideo.srcObject=a,this.$refs.localVideo.play()}catch(e){this.$parent.cameraErr=!0}},retakeCamera(){this.captures=[],this.cap=0,navigator.mediaDevices.getUserMedia({video:!0}).then((a=>{this.$refs.localVideo.srcObject=a,this.$refs.localVideo.play()}))},handleOk(){let a=this.captures[this.captures.length-1];this.$parent.pic=a,this.$store.commit("setcam",1),this.picok=1,this.$parent.regitValidation(),this.$parent.imageStatus=!0,this.openVideo=null},cancel(){this.openVideo=null,this.picok=0;let a=this.$refs.localVideo.srcObject,e=a.getTracks();e.forEach((function(a){a.stop()})),this.camok=0}},created(){this.comBus.on("setEdit",(a=>{this.show=a})),null!=this.pdata&&(this.captures.push(this.pdata),this.$store.commit("setcam",1),this.picok=1)},computed:(0,m.rn)(["camok","ActiveApp"]),watch:{pdata(a,e){this.value=a,this.pdata=this.value,null!=this.pdata&&(this.captures.push(this.pdata),this.$store.commit("setcam",1),this.picok=1)}}}),v=t(3744);const g=(0,v.Z)(k,[["render",d],["__scopeId","data-v-5a8828e6"]]);var C=g}}]);
//# sourceMappingURL=5435.c1c1526a.js.map